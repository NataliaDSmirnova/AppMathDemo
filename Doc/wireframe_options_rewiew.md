# Обзор методов частичного каркасного рендеринга
*Задача: отобразить часть объекта, как каркас*

## 1. Способы отобразить объект как wireframe:
- Wireframe Rendering

На форуме юнити найден [скрипт](http://answers.unity3d.com/questions/144693/wireframe-rendering.html), 
после применения которого к объекту, меш начинает рендериться, как каркас.

-: вычислительно сложно (заметно ухудшает производительность)

- GL.wireframe

Собственно метод юнити [из коробки](https://docs.unity3d.com/ScriptReference/GL-wireframe.html). Позволяет переключиться в режим
каркасного рендеринга

-: применяется к камере, а не к отдельным объектам (решается созданием дополнительных камер и разделением на слои); 
не работает на мобильных устройствах (OpenGL ES)

+: без потерь по производительности

- Wireframe Shader

В репозитории UnityCommunity найден [шейдер](https://github.com/UnityCommunity/UnityLibrary/blob/master/Shaders/Effects/WireFrame.shader)
написанный по мотивам [статьи](http://developer.download.nvidia.com/SDK/10/direct3d/Source/SolidWireframe/Doc/SolidWireframe.pdf) от nvidia. 

+: Быстро, качественно, работает, недостатков не выявлено.

*Все описанные методы были протестированы, скрипты закоммичены*

## 2. Способы отобразить часть объекта как wireframe:

- Массив частей

Заранее строить меш как массив более мелких - в случае яблока, например ломтики. 
Затем делить массив между двумя объектами: отображаемым полностью и каркасно.

+: можно задавать разный шаг сетки

-: нужна структура позволяющая разделять меш на части по разным измерениям; 
затратно по памяти; 
подойдет только для линейных отсечений (cutting plane) по разным осям;
не универсальный подход;
неинтересно

- Проектировать wireframe. 

С помощью Projector отобразить на исходный объект материал с wireframe шейдером. 
Самый изящный подход, но согласно документации Projector может использовать только специальный тип шейдера - 
в projector префабах, которые находятся в стандартных ассетах.
[Тут](https://forum.unity3d.com/threads/projecting-a-hole.35808/) похоже научились проектировать дырки.

*Последующие методы базируются на одной идее: cоздаем две версии объекта - полную и каркасную,
затем одну из них в пределах заданного объема прячем, а другую показываем*

- Секущие плоскости

[Туториал](http://www.toxicfork.com/194/per-object-clipping-planes-shader-in-unity3d-5)
по написанию шейдера, скрывающего часть объекта отсекаемую произвольной гиперплососкостью.

-: только линейное отсечение - при сложной форме потребуется много плоскостей

- CSG (Конструктивная блочная геометрия)

Необходимые фигуры можно получить с помощью булевых операций. Для юнити есть несколько библиотек
разной степени свежести, например [pb_CSG](https://github.com/karl-/pb_CSG)

- Stencils

Самый многообещающий подход. Наложить маску по форме заданной области с помощью Stencils.
На данный момент имеются проблемы, связанные с z-буфером

Альтернативно, можно задавать область в плоскости, перпендикулярной направлению камеры (тогда таких проблем не будет)

*На данный момент, в сцене wf_test_2 реализована версия метода, использующего Stencils и GL.wireframe
(в каркасном виде отображается часть объекта, находящаяся за полупрозрачным кубом).*
